<header>
    <div
        class="card">
        <span
            class="button-group">
            <button
                (click)="decreaseFontSize()"
                [disabled]="fontSize === MIN_FONT_SIZE"
                class="btn btn-secondary">
                aa
            </button>
            <button
                (click)="increaseFontSize()"
                [disabled]="fontSize === MAX_FONT_SIZE"
                class="btn btn-secondary">
                AA
            </button>
        </span>

        <select
            class="custom-select"
            (change)="changeFontFamily($event)">
            <option
                value="">
                Default
            </option>

            <option
                value="sans-serif">
                Sans-Serif
            </option>

            <option
                value="serif">
                Serif
            </option>
        </select>

        <button
            (click)="openDropdown($event)"
            class="btn btn-secondary">
            ...

            <cv-dropdown
                #dropdown
                closeOnScroll="true">
                <a
                    class="item">
                    Print
                </a>

                <a
                    class="item">
                    Share
                </a>

                <div
                    class="divider"></div>

                <a
                    class="item">
                    Rename
                </a>

                <a
                    (click)="removeCV()"
                    class="item text-danger">
                    Delete
                </a>
            </cv-dropdown>
        </button>
    </div>
</header>

<div
  class="card">
  <section
    *ngFor="let section of (sections | async)">

    <!--TODO MOVE PATH CALCULATION TO SOMEWHERE ELSE-->

    <cv-details
      *ngIf="section.meta.type === 'DETAILS'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-details>

    <cv-divider
      *ngIf="section.meta.type === 'DIVIDER'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-divider>

    <cv-education
      *ngIf="section.meta.type === 'EDUCATION'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-education>

    <cv-experience
      *ngIf="section.meta.type === 'EXPERIENCE'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-experience>

    <cv-skills
      *ngIf="section.meta.type === 'SKILLS'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-skills>

    <cv-feedback
      *ngIf="section.meta.type === 'FEEDBACK'"
      [path]="'sections/' + (uid | async) + '/' + (cid | async) + '/' + section.$key"
      [section]="section"
      [style.order]="section.meta.order">
    </cv-feedback>
  </section>

  <div
    *ngIf="!(sections | async)">
      <div class="ghost" style="height: 2rem;width: 12rem; margin-bottom: 1rem;"></div>
      <div class="ghost" style="height: 5rem;margin-bottom: 1rem;"></div>
      <div class="ghost" style="height: 1rem;margin-bottom: 1rem;"></div>
      <div class="ghost" style="height: 1rem;margin-bottom: 2rem;"></div>
      <div class="ghost" style="height: 2rem;margin-bottom: 1rem; width: 12rem;"></div>
      <div class="ghost" style="height: 5rem;margin-bottom: 1rem;"></div>
      <div class="ghost" style="height: 5rem;margin-bottom: 1rem;"></div>
      <div class="ghost" style="height: 5rem;margin-bottom: 1rem;"></div>
    </div>
</div>

<footer>
  <label
    class="form-control-label">
    Add new section
  </label>

  <form
    (submit)="submitChanges($event)"
    class="card"
    autocomplete="off"
    novalidate>

    <div class="form-group row">
      <label class="col-2 col-form-label">Title</label>
      <div class="col-10">
        <input
          placeholder="Section title"
          class="form-control"
          type="text"
          name="name"
          [(ngModel)]="newSection.title">
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Type</label>
      <div class="col-10">
        <select
          name="type"
          class="custom-select"
          [(ngModel)]="newSection.type">
          <option
            [value]="type.type"
            *ngFor="let type of types">
            {{ type.name }}
          </option>
        </select>
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-block btn-success">
      Add
    </button>
  </form>
</footer>

